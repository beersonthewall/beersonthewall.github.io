<!doctype html><html lang=en><head><meta content="width=device-width,initial-scale=1" name=viewport><title>Beersonthewall</title><link href=https://www.beersonthewall.com/style.css rel=stylesheet><body><div class=container><aside class=navigation><a href=https://www.beersonthewall.com> <img class=icon src=https://www.beersonthewall.com/favicon.ico> </a><nav><ul><li><a class=navlink href=https://www.beersonthewall.com>www.beersonthewall.com</a><li><a class=navlink href=/blog>posts</a> | <a class=navlink href=https://github.com/beersonthewall>src</a></ul></nav></aside><main class=content><h1>TIL: FFmpeg is Pretty Neat</h1><p><p>So I recently needed to make a GIF on my linux desktop (PopOS) but had no idea how to approach it. Some searching around told me I'd need to take a screen capture so I defaulted to the GNOME screenshot tool.<p>Ctrl-Shift-Alt-R opens the option to take a screencapture instead of just a screenshot. However I soon ran into issues where the video output was freezing after the first few seconds. Not wanting to get sidetracked running down why that wasn't working (this turned out to be an issue in <a href=https://gitlab.gnome.org/GNOME/gnome-screenshot/-/issues/228>gstreamer/pipewire</a>).<p>I started looking for other tools which lead me to ffmpeg. I was vaguely aware that ffmpeg was the go-to tool for video manipulation, but hadn't needed it before.<p>Turns out FFMPEG is pretty neat! You can get the simple 'grab-box' style UI using the <code>-select_region</code> flag. No need for specific cordinates or monitor ids.<p><code>ffmpeg -video_size 1024x768 -framerate 25 -f x11grab -select_region 1 -i :1.0 i.mp4</code><p>Trimming the recording was also pretty easy. The flag <code>-ss 5</code> seeks 5 seconds into the video and <code>-t 40</code> to stop writing after 40 seconds of video output.<p><code>ffmpeg -i i.mp4 -ss 5 -t 40 output.mp4</code><p>Then I could chunk the video into frames with:<p><code>ffmpeg -i output.mp4 -r 5 frames/frame%3d.png</code><p>The last bit was to open all these frames as layers if <a href=https://www.gimp.org/>GIMP</a> and (after some cleanup / optimization) export it as an animated GIF!</main></div>